{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91961\\\\Desktop\\\\fprac3\\\\fedproject\\\\my-react-app\\\\src\\\\Admin\\\\AdminDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './AdminDashboard.css'; // Import the CSS file for styles\nimport EditModal from './EditModal'; // Import the modal component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const [username, setUsername] = useState(null);\n  const [users, setUsers] = useState([]);\n  const [shops, setShops] = useState([]);\n  const [selectedItem, setSelectedItem] = useState(null); // Track selected user/shop\n  const [editType, setEditType] = useState(\"\"); // Track if editing user or shop\n  const navigate = useNavigate();\n  useEffect(() => {\n    const checkSession = async () => {\n      const response = await fetch('http://localhost:5000/admin/checksession', {\n        credentials: 'include' // Send cookies with the request\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setUsername(data.username); // Set the username if session is valid\n        setUsers(data.details.users); // Set the users if session is valid\n        setShops(data.details.shops); // Set the shops if session is valid\n      } else {\n        navigate('/login');\n        setUsername(null); // Clear username if session is not valid\n      }\n    };\n    checkSession();\n  }, []);\n\n  // Handler to open modal\n  const handleEditClick = (item, type) => {\n    setSelectedItem(item);\n    setEditType(type);\n  };\n\n  // Handler to close modal\n  const handleCloseModal = () => {\n    setSelectedItem(null);\n    setEditType(\"\");\n  };\n  if (!username) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-message\",\n      children: \"You must be logged in as an admin to view this page.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Welcome, \", username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleEditClick(user, \"user\"),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Username: \", user.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", user.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shops\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: shops.map(shop => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => handleEditClick(shop, \"shop\"),\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Shop Name: \", shop.shopname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Owner: \", shop.owner]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", shop.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, shop._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), selectedItem && /*#__PURE__*/_jsxDEV(EditModal, {\n      item: selectedItem,\n      type: editType,\n      onClose: handleCloseModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminDashboard, \"NM60uskaLqEStiw/DjaSyohwUxw=\", false, function () {\n  return [useNavigate];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","EditModal","jsxDEV","_jsxDEV","AdminDashboard","_s","username","setUsername","users","setUsers","shops","setShops","selectedItem","setSelectedItem","editType","setEditType","navigate","checkSession","response","fetch","credentials","ok","data","json","details","handleEditClick","item","type","handleCloseModal","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","user","onClick","email","_id","shop","shopname","owner","onClose","_c","$RefreshReg$"],"sources":["C:/Users/91961/Desktop/fprac3/fedproject/my-react-app/src/Admin/AdminDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AdminDashboard.css'; // Import the CSS file for styles\r\nimport EditModal from './EditModal'; // Import the modal component\r\n\r\nconst AdminDashboard = () => {\r\n    const [username, setUsername] = useState(null);\r\n    const [users, setUsers] = useState([]);\r\n    const [shops, setShops] = useState([]);\r\n    const [selectedItem, setSelectedItem] = useState(null); // Track selected user/shop\r\n    const [editType, setEditType] = useState(\"\"); // Track if editing user or shop\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const checkSession = async () => {\r\n            const response = await fetch('http://localhost:5000/admin/checksession', {\r\n                credentials: 'include' // Send cookies with the request\r\n            });\r\n\r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUsername(data.username); // Set the username if session is valid\r\n                setUsers(data.details.users); // Set the users if session is valid\r\n                setShops(data.details.shops); // Set the shops if session is valid\r\n            } else {\r\n                navigate('/login');\r\n                setUsername(null); // Clear username if session is not valid\r\n            }\r\n        };\r\n\r\n        checkSession();\r\n    }, []);\r\n\r\n    // Handler to open modal\r\n    const handleEditClick = (item, type) => {\r\n        setSelectedItem(item);\r\n        setEditType(type);\r\n    };\r\n\r\n    // Handler to close modal\r\n    const handleCloseModal = () => {\r\n        setSelectedItem(null);\r\n        setEditType(\"\");\r\n    };\r\n\r\n    if (!username) {\r\n        return <div className=\"login-message\">You must be logged in as an admin to view this page.</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-dashboard\">\r\n            <h1>Welcome, {username}</h1>\r\n            \r\n            <h2>Users</h2>\r\n            <ul>\r\n                {users.map(user => (\r\n                    <li key={user._id} onClick={() => handleEditClick(user, \"user\")}>\r\n                        <p>Username: {user.username}</p>\r\n                        <p>Email: {user.email}</p>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            <h2>Shops</h2>\r\n            <ul>\r\n                {shops.map(shop => (\r\n                    <li key={shop._id} onClick={() => handleEditClick(shop, \"shop\")}>\r\n                        <p>Shop Name: {shop.shopname}</p>\r\n                        <p>Owner: {shop.owner}</p>\r\n                        <p>Email: {shop.email}</p>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n\r\n            {selectedItem && (\r\n                <EditModal\r\n                    item={selectedItem}\r\n                    type={editType}\r\n                    onClose={handleCloseModal}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}